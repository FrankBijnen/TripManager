<!DOCTYPE html>
<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for HTML5 for Windows version 5.9.14">
  <title>7) Comparing a trip with a GPX</title>
  <meta name="generator" content="HelpMaker.net">
  <meta name="keywords" content="Check,Compare,Trip,GPX,">
  <style type="text/css">
  body {
  background-color: #FFFCEA;
  }
  div.c19 {margin-left:13mm; margin-right:0mm; text-indent:0mm;}
  span.c18 {color: #010101; font-family: Calibri; font-size: 120%; font-style: italic}
  div.c17 {margin-left:13mm; margin-right:0mm; text-indent:-6mm;}
  span.c16 {color: #010101; font-family: Symbol; font-size: 120%}
  table.c15 {border-collapse: collapse; border: none}
  div.c14 {margin-left:6mm; margin-right:0mm; text-indent:-6mm;}
  a.c13 {color: #010101; font-family: Calibri; font-size: 120%}
  span.c12 {font-size: 14pt; font-weight: bold}
  span.c11 {color: #010101}
  br.c10 {page-break-before:always}
  span.c9 {color: #010101; font-family: Symbol; font-size: 12pt}
  a.c8 {color: #0000FF; font-family: Calibri; font-size: 120%}
  span.c7 {font-size: 14pt; text-decoration: underline}
  span.c6 {color: #010101; font-family: Calibri; font-size: 120%}
  span.c5 {color: #010101; font-family: Calibri; font-size: 120%; font-weight: bold}
  table.c4 {background-color: #FFFFFF}
  span.c3 {color: #0000FF; font-family: Calibri; font-size: 150%; font-weight: bold}
  td.c2 {font-weight: bold}
  span.c1 {font-family: Calibri; font-size: 150%}
  </style>
</head>
<body>
  <table class="c4" width="100%" border="0" cellspacing="0"
  cellpadding="2">
    <tr>
      <td class="c2" align="left"><span class="c1"><a href=
      "6sendtodevice.html">Previous</a> <a href=
      "toc.html">Top</a> <a href=
      "8postprocessingagpx.html">Next</a></span></td>
      <td align="center" width="75%">
        <div align="center">
          <span class="c3">7) Comparing a trip with a GPX</span>
        </div>
      </td>
    </tr>
  </table>
  <hr>
  <div align="left"></div>
  <div align="left">
    <span class="c5">Automatic Compare</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">Version V1.5 of TripManager features an
    automatic compare of a trip with the original GPX route. The
    manual compare is still available of course. (See the</span>
    <a class="c8" href=
    "7compareatripwithagpx.html#manual"><span class=
    "c7">bottom</span></a> <span class="c6">of this
    document)</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">A short explanation how the compare
    works.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c5">Background:</span>
  </div>
  <div align="left">
    <span class="c6">UDBdirs are sub items of mAllroutes and are
    the result of the calculation on the Zumo, and define the trip
    (route) exactly. They contain the GPS coordinates, and the Map
    Segment + Road ID. The compare works by checking for every
    UDBdir if the GPS Coordinates (or Point Location) can be found
    in the original GPX. If the GPX was calculated by BaseCamp the
    check can even be done on Map Segment + Road ID.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c9">·   </span><span class="c6">By Point Location
    (Track or Route)</span>
  </div>
  <div align="left">
    <span class="c6">This compare takes all the UDBdir records and
    tries to find them as &lt;trkpt&gt;. This check will work for
    tracks, but also for routes. In that case TM will use the
    &lt;gpxx:rpt&gt; as &lt;trkpt&gt; and just ignore the Map
    Segment + Road Id in the subclass.<br>
    To improve speed TM will first look up the track points of the
    previous and next route point and use those track points as a
    range. Think of it as the range of track points between 2
    via/shaping points.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c9">·   </span><span class="c6">By Point Location
    and Road Id (BC Calculated Route)</span>
  </div>
  <div align="left">
    <span class="c6">This compare will only work for a BC
    calculated route. First it tries to match the UDBDir type 3
    records (Via/Shaping points in a trip) with the &lt;rtept&gt;
    tags (Via/Shaping points in a GPX). For every type 3 there
    should be a matching &lt;rtept&gt;. Next it checks the Name and
    distance in GPS coordinates. If it finds a difference a line is
    added with the distance between the points in meters.</span>
  </div>
  <div align="left">
    <span class="c6">For all other UDBdirs there should be a
    corresponding &lt;gpxx:rpt&gt; with a &lt;subclass&gt;. They
    are checked for Map Segment  + Road ID and distance.</span>
  </div>
  <div align="left">
    <span class="c6">Note: if the subclass is different, but the
    distance is 0 it could be the case of a route point on a
    junction.<br>
    <br></span>
  </div>
  <div align="left">
    <span class="c6">In the settings you can specify the allowed
    distance. (500 meters default)</span><span class=
    "c11"><br clear="all" class="c10"></span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <a class="c13" name="automatic" id="automatic"><span class=
    "c12">Starting an automatic compare</span></a>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Select a .trip
    file. This can be a .trip file on the Device or on a Windows
    Folder.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Right click on the
    Grid and select the Compare method. Or use
    CTRL+ALT+C/CTRL+ALT+B</span>
  </div>
  <div align="left">
    <br>
  </div>
  <table width="678" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="670">
        <div align="left"><img src="7compareatripwithagpxb1.JPG"
        width="652" height="198" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Select the GPX
    file, and the Route/Track in that GPX file.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c11"><br></span>
  </div>
  <table width="553" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="545">
        <div align="left"><img src="7compareatripwithagpxb2.JPG"
        width="507" height="343" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c11"><br></span>
  </div><span class="c11"><br clear="all" class="c10"></span>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">A log window will
    be displayed with the results. The results are also copied to
    the clipboard.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">The selected
    route/track to compare with will also be shown on the
    map.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Clicking on a line
    of the log window will mark that on the map.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">The items in error
    will be marked with a different background color on the
    treeview.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <table width="1320" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="1312">
        <div align="left"><img src="7compareatripwithagpxb3.JPG"
        width="1497" height="579" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Use ALT+Cursor
    Down/ALT+Cursor Up to find the differences in the
    Treeview.</span>
  </div>
  <div align="left">
    <br>
  </div><span class="c11"><br clear="all" class="c10"></span>
  <div align="left">
    <a class="c13" name="fix" id="fix"><span class="c12">Creating a
    fixed trip from the compare.</span></a>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">In the compare window the difference lines
    have checkboxes that you can tick individually. Using
    Ctrl/Click on the map + Apply Coordinates you can adjust the
    GPS location to your choice.</span>
  </div>
  <div align="left">
    <span class="c6">When a segment line is selected you can click
    on 'Prefer Gpx' to have TripManager automatically tick the
    checkboxes.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">All ticked lines will become <b>additional
    shaping points</b> when you click on <b>Open fixed trip</b>, or
    <b>Save fixed GPX</b>.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">For an example see:</span> <a class="c8" href=
    "theuniversalroute.html#bc_compare_fix"><span class="c7">The
    universal route</span></a>
  </div>
  <table width="553" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="545">
        <div align="left"><img src="7compareatripwithagpxb4.JPG"
        width="291" height="166" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left">
    <br>
    <span class="c11"><br clear="all" class="c10"></span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <a class="c13" name="checks" id="checks"><span class=
    "c12">Checks performed</span></a>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c9">·   </span><span class="c6">General</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'Can not find
    mAllRoutes in trip.'</span>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'Trip does not
    appear to be calculated.'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The trip can not be used for compare.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c11"><br></span>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">Route point NOT
    OK'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The route points in the trip dont match the
    route points in the GPX. The name or the GPS coordinates could
    be different.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c9">·   </span><span class="c6">By Point Location
    (Track or Route)</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'Coordinates NOT
    OK'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The coordinates of the trip can not be found
    in the GPX.</span>
  </div>
  <div align="left" class="c19">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'No &lt;trkpt&gt;
    in GPX.'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The GPX has no &lt;trkpt&gt; at all, so can
    not be used.</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c9">·   </span><span class="c6">By Point Location
    and Road Id (BC Calculated Route)</span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'Number of route
    points does not match in trip and gpx route.'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The GPX route does not match the trip.</span>
  </div>
  <div align="left" class="c19">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'No &lt;rte&gt;
    in GPX.'</span>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'No &lt;rtept&gt;
    in GPX.'</span>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'No
    &lt;gpxx:rpt&gt; in GPX file. Non BaseCamp origin?'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">Probably not a valid route, or not calculated
    by BaseCamp.</span>
  </div>
  <div align="left" class="c19">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">No matching
    RtePt found for: %s MapSeg + Road:%s, Lat:%s, Lon:%s'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">Indicates programming error. Should not
    occur.</span>
  </div>
  <div align="left" class="c19">
    <br>
  </div>
  <div align="left" class="c19">
    <span class="c6">'Road NOT OK'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The subclass does not match. A mismatch in
    Road-Id's</span>
  </div>
  <div align="left" class="c19">
    <br>
  </div>
  <div align="left" class="c17">
    <span class="c16">·   </span><span class="c6">'Road OK,
    Coordinates NOT OK'</span>
  </div>
  <div align="left" class="c19">
    <span class="c18">The subclass matches, but the coordinates
    dont.</span><span class="c11"><br clear="all" class=
    "c10"></span>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <a class="c13" name="manual" id="manual"><span class=
    "c12">Manual Compare</span></a>
  </div>
  <div align="left">
    <br>
  </div>
  <div align="left">
    <span class="c6">It is assumed that you have already loaded
    your trips on the Zumo, using one of the methods described
    in</span> <a class="c8" href="6sendtodevice.html"><span class=
    "c7">6 Send to device</span></a><span class="c6">.</span>
  </div>
  <div align="left">
    <span class="c6">The next steps show how you can check the
    result at your desk on the big screen of your computer.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Connect your
    XT(2), and wait for it to appear in the Explorer.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Start
    TripManager.</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Navigate, in the
    top-right panel, to the folder containing the GPX</span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Select the GPX
    file (Top-right) and click on <b>Add to map</b>. Choose a color
    different from the trip color.</span>
  </div>
  <table width="684" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="676">
        <div align="left"><img src="7compareatripwithagpxb5.JPG"
        width="652" height="713" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left">
    <br>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">Click on the trip
    (Top-left). The trip will be shown in the default trip color.
    That can be changed in <b>Advanced/Settings</b>, Tab
    <b>General.</b></span>
  </div>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">You can now
    compare the lines. Blue, chosen in the screenshot, is the
    original track, Magenta is the trip on the XT(2).</span>
  </div>
  <table width="1428" cellpadding="4" cellspacing="0" class="c15">
    <tr>
      <td valign="top" width="1420" height="756">
        <div align="left"><img src="7compareatripwithagpxb6.JPG"
        width="1098" height="724" border="0" alt="graphic"></div>
      </td>
    </tr>
  </table>
  <div align="left" class="c14">
    <span class="c9">·   </span><span class="c6">If the XT(2) has
    made some choices you dont like, add more shaping points in
    Basecamp and repeat the procedure.</span>
  </div>
  <div align="left"></div>
  <div align="left"></div>
</body>
</html>
